# myGarage-backend

# Register a User:
endpoint: https://srp-my-garage.herokuapp.com/api/auth/register
request: post
body:
    {
        "username": "string (not nullable)",
        "password": "string (not nullable)"
    }

returns a user object with an id, username & hashed password. Also returns a jwt that's required to access other endpoints.

# Log a user in:
endpoint: https://srp-my-garage.herokuapp.com/api/auth/login
request: post
body:
    {
        "username": "string (not nullable)",
        "password": "string (not nullable)"
    }

returns a user object with an id, username. Also returns a jwt that's required to access other endpoints.


# Add a vehicle
endpoint: https://srp-my-garage.herokuapp.com/api/vehicles/:userId
request: post

body:
    {
        "vehicle_make": "string (not nullable)",
        "vehicle_model": "string (not nullable)",
        "vehicle_year": integer (not nullable)
    }

returns a vehicheAdded object with all the vehicle details and autogenerated id. Also automatically relates the vehicle to the user under the user_vehicles table.

# Delete a vehicle
endpoint: https://srp-my-garage.herokuapp.com/api/vehicles/:vehicleId
request: delete

deletes the vehicle and all associated records

# Get user Vehicles 

endpoint: https://srp-my-garage.herokuapp.com/api/vehicles/:userId
request: get

returns any vehicles associated with this user

# Add a service
endpoint: https://srp-my-garage.herokuapp.com/api/services
request: post

body:
    [ 
        {
        "service_name": "string (not nullable)",
        "service_date": "string",
        "service_mileage": integer (not nullable),
        "next_service_date": string
        "next_service_mileage": integer (not nullable)
        "service_notes": "string"
        },
        {
            "vehicle_id": integer (must be provided by front end)
        }
    ]

returns a service added object that was passed in with the request. Automatically associates the service to the specified vehicle.

# remove a service
endpoint: https://srp-my-garage.herokuapp.com/api/services/:id
request: delte

deletes the specified service


# deployment instructions

ensure all environment objects are configured on heroku
add the heroku-postgresql add on (if not done already)
git push heroku master
heroku config | grep HEROKU_POSTGRESQL
heroku run knex migrate:rollback
heroku run knex migrate:latest

